"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var Analysis = /** @class */ (function () {
    function Analysis(parsedObj, dependenciesMap) {
        this.parsedObj = parsedObj;
        this.dependenciesMap = dependenciesMap;
        this.componentOrderKeyMap = {};
    }
    Analysis.prototype.getComponentOrderKeyMap = function (projKeys) {
        var _this = this;
        projKeys.forEach(function (key) {
            _this.componentOrderKeyMap[key] = 1;
        });
    };
    Analysis.prototype.calculateOrderNumber = function (componentKeys) {
        var _this = this;
        componentKeys.forEach(function (key) {
            var dependenciesInstance = _this.dependenciesMap[key];
            Object.keys(dependenciesInstance).forEach(function (_key) {
                if (_this.componentOrderKeyMap[_key]) {
                    _this.componentOrderKeyMap[_key] += dependenciesInstance[_key];
                }
            });
        });
    };
    Analysis.prototype.getProjectOrder = function () {
        var _this = this;
        var componentKeys = Object.keys(this.dependenciesMap).filter(function (key) { return key !== 'Global'; });
        this.getComponentOrderKeyMap(componentKeys); //
        this.calculateOrderNumber(componentKeys);
        var projectArray = Object.keys(this.componentOrderKeyMap).map(function (key) {
            return { name: key, order: _this.componentOrderKeyMap[key] };
        });
        return projectArray
            .sort(function (item1, item2) {
            return item2.order - item1.order;
        })
            .map(function (item) { return item.name; });
    };
    return Analysis;
}());
exports.default = Analysis;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYW5hbHlzaXMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvY29tbW9uL2V4ZWNDb21tYW5kL2FuYWx5c2lzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUE7SUFFRSxrQkFBK0IsU0FBYyxFQUFxQixlQUFvQjtRQUF2RCxjQUFTLEdBQVQsU0FBUyxDQUFLO1FBQXFCLG9CQUFlLEdBQWYsZUFBZSxDQUFLO1FBRDlFLHlCQUFvQixHQUEyQixFQUFFLENBQUM7SUFDK0IsQ0FBQztJQUNsRiwwQ0FBdUIsR0FBL0IsVUFBZ0MsUUFBa0I7UUFBbEQsaUJBSUM7UUFIQyxRQUFRLENBQUMsT0FBTyxDQUFDLFVBQUMsR0FBVztZQUMzQixLQUFJLENBQUMsb0JBQW9CLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ3JDLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUVPLHVDQUFvQixHQUE1QixVQUE2QixhQUF1QjtRQUFwRCxpQkFTQztRQVJDLGFBQWEsQ0FBQyxPQUFPLENBQUMsVUFBQyxHQUFXO1lBQ2hDLElBQU0sb0JBQW9CLEdBQUcsS0FBSSxDQUFDLGVBQWUsQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUN2RCxNQUFNLENBQUMsSUFBSSxDQUFDLG9CQUFvQixDQUFDLENBQUMsT0FBTyxDQUFDLFVBQUMsSUFBSTtnQkFDN0MsSUFBSSxLQUFJLENBQUMsb0JBQW9CLENBQUMsSUFBSSxDQUFDLEVBQUU7b0JBQ25DLEtBQUksQ0FBQyxvQkFBb0IsQ0FBQyxJQUFJLENBQUMsSUFBSSxvQkFBb0IsQ0FBQyxJQUFJLENBQUMsQ0FBQztpQkFDL0Q7WUFDSCxDQUFDLENBQUMsQ0FBQztRQUNMLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUNELGtDQUFlLEdBQWY7UUFBQSxpQkFZQztRQVhDLElBQU0sYUFBYSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxVQUFDLEdBQUcsSUFBSyxPQUFBLEdBQUcsS0FBSyxRQUFRLEVBQWhCLENBQWdCLENBQUMsQ0FBQztRQUMxRixJQUFJLENBQUMsdUJBQXVCLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxFQUFFO1FBQy9DLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxhQUFhLENBQUMsQ0FBQztRQUN6QyxJQUFNLFlBQVksR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxVQUFDLEdBQUc7WUFDbEUsT0FBTyxFQUFFLElBQUksRUFBRSxHQUFHLEVBQUUsS0FBSyxFQUFFLEtBQUksQ0FBQyxvQkFBb0IsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDO1FBQzlELENBQUMsQ0FBQyxDQUFDO1FBQ0gsT0FBTyxZQUFZO2FBQ2hCLElBQUksQ0FBQyxVQUFDLEtBQUssRUFBRSxLQUFLO1lBQ2pCLE9BQU8sS0FBSyxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDO1FBQ25DLENBQUMsQ0FBQzthQUNELEdBQUcsQ0FBQyxVQUFDLElBQUksSUFBSyxPQUFBLElBQUksQ0FBQyxJQUFJLEVBQVQsQ0FBUyxDQUFDLENBQUM7SUFDOUIsQ0FBQztJQUNILGVBQUM7QUFBRCxDQUFDLEFBaENELElBZ0NDIn0=